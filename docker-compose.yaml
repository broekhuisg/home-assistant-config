## Home Assistant
version: '3'
services:
  homeassistant:
    container_name: home-assistant
    image: homeassistant/home-assistant:latest
    environment:
      - TZ=Europe/Amsterdam
    volumes:
      - /home/gavin/hass/hass-config:/config
      - /mnt/allexhdds/exhdd2/frigate-clips:/media
      - /etc/localtime:/etc/localtime:ro
    restart: always
    network_mode: host
    devices:
      - /dev/ttyACM0:/dev/ttyACM0
    healthcheck:
      test: ["CMD", "curl", "-sI", "http://127.0.0.1:8123/"]
      interval: 300s
      timeout: 3s
      retries: 10

# ## MariaDB
# version: '3.1'
# services:
#   db:
#     container_name: mariadb
#     image: mariadb
#     restart: always
#     volumes:
#       - /home/gavin/mariadb:/etc/mysql/conf.d
#       - /home/gavin/mariadb:/var/lib/mysql
#     ports:
#       - 3306:3306
#     environment:
#       - MYSQL_ROOT_PASSWORD=admin
#       - TZ=Europe/Amsterdam
#       - PGID=1000
#       - PUID=1000

# ## Deconz
# version: '3'
# services:
#   deconz:
#     container_name: deconz
#     image: marthoc/deconz
#     environment:
#       - TZ=Europe/Amsterdam
#       - DECONZ_DEVICE=/dev/ttyACM0
#     volumes:
#       - /home/gavin/deconz:/root/.local/share/dresden-elektronik/deCONZ
#       - /etc/localtime:/etc/localtime:ro
#     restart: always
#     network_mode: host
#     devices:
#       - /dev/ttyACM0:/dev/ttyACM0

# ## Mosquitto MQTT
# version: '3'
# services:
#   mqtt:
#     container_name: mqtt
#     image: eclipse-mosquitto
#     ports:
#       - 1883:1883
#       - 9001:9001
#     volumes:
#       - /home/gavin/mosquitto/config:/mosquitto/config
#       - /home/gavin/mosquitto/log:/mosquitto/log
#       - /home/gavin/mosquitto/data:/mosquitto/data
#       - /etc/localtime:/etc/localtime:ro
#     restart: always
#     network_mode: host